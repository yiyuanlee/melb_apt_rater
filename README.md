# ðŸ¢ MelbScore - å¢¨å°”æœ¬å…¬å¯“è¯„åˆ†ç½‘  
**ä¸€ä¸ªåŸºäºŽ Next.js + Supabase æž„å»ºçš„â€œè™Žæ‰‘é£Žæ ¼â€å¢¨å°”æœ¬å…¬å¯“ç‚¹è¯„ç¤¾åŒº**

MelbScore æ˜¯ä¸“ä¸º **å¢¨å°”æœ¬ç•™å­¦ç”Ÿã€ä¸Šç­æ—ä¸Žç§Ÿæˆ¿ç¾¤ä½“** æ‰“é€ çš„å…¬å¯“è¯„åˆ†ä¸Žç‚¹è¯„å¹³å°ã€‚  
çµæ„Ÿæ¥æºäºŽã€Œè™Žæ‰‘è¯„åˆ†ã€ï¼Œæ—¨åœ¨è®©ç§Ÿå®¢å¿«é€Ÿäº†è§£å…¬å¯“çœŸå®žå±…ä½ä½“éªŒï¼Œé¿å…è¸©å‘ã€‚

å¹³å°æä¾› **å…¬å¯“è¯„åˆ†ã€çƒ­é—¨æ¦œå•ã€å¤§å›¾æ²‰æµ¸å¼è¯¦æƒ…é¡µã€è¯„è®ºç¤¾åŒºã€ç®€å•é£ŽæŽ§ç­‰åŠŸèƒ½**ï¼Œå¸®åŠ©ç”¨æˆ·æ›´é€æ˜Žåœ°äº†è§£å¢¨å°”æœ¬å„å¤§å…¬å¯“ã€‚

---

## ðŸ“– é¡¹ç›®ç®€ä»‹

**MelbScore çš„æ ¸å¿ƒç›®æ ‡ï¼šè®©æ¯ä¸€ä¸ªå‡†å¤‡åœ¨å¢¨å°”æœ¬ç§Ÿæˆ¿çš„äººéƒ½èƒ½çœ‹åˆ°çœŸå®žè¯„ä»·ã€‚**

ç”¨æˆ·å¯ä»¥ï¼š

- ðŸ”¥ æµè§ˆå¢¨å°”æœ¬çƒ­é—¨å…¬å¯“æŽ’åï¼ˆæŒ‰è¯„è®ºæ•°è‡ªåŠ¨æŽ’åºï¼‰  
- â­ æŸ¥çœ‹å®žæ—¶å…¬å¯“å¹³å‡åˆ†ï¼ˆ1â€“10 åˆ†åˆ¶ï¼‰  
- ðŸ“ æäº¤è‡ªå·±çš„å±…ä½ä½“éªŒè¯„åˆ†ä¸Žè¯„è®º  
- ðŸ–¼ï¸ ä½“éªŒæ²‰æµ¸å¼çš„å¤§å›¾è¯¦æƒ…é¡µ  
- ðŸ›¡ï¸ åœ¨ç®€å•é£ŽæŽ§æœºåˆ¶ä¸‹é˜²æ­¢é‡å¤åˆ·åˆ†  
- ðŸ“¡ æµè§ˆæ¥è‡ª Supabaseã€æœ¬åœ°ä¸Ž Unsplash çš„æ··åˆå›¾æº  

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½äº®ç‚¹

### ðŸ”¥ çƒ­é—¨æ¦œå•ï¼ˆè‡ªåŠ¨æŽ’åºï¼‰
é¦–é¡µæ ¹æ®è¯„è®ºæ•°é‡è®¡ç®—çƒ­åº¦ï¼Œå±•ç¤ºæœ€çƒ­é—¨çš„å…¬å¯“ã€‚

### â­ å®žæ—¶è¯„åˆ†ç³»ç»Ÿ
- ç”¨æˆ·æ‰“åˆ†åŽæ•°æ®ç›´æŽ¥å†™å…¥æ•°æ®åº“  
- PostgreSQL è§¦å‘å™¨è‡ªåŠ¨æ›´æ–°å¹³å‡åˆ†ä¸Žè¯„åˆ†äººæ•°  
- æ— éœ€åŽç«¯æ‰‹åŠ¨è®¡ç®—  

### ðŸ–¼ï¸ æ²‰æµ¸å¼è§†è§‰ä½“éªŒ
- å…¬å¯“è¯¦æƒ…é¡µé‡‡ç”¨å¤§å›¾èƒŒæ™¯  
- é†’ç›®çš„è¯„åˆ†å±•ç¤º  
- é¡µé¢é£Žæ ¼â€œè™Žæ‰‘å‘³â€åè¶³  

### ðŸ›¡ï¸ é˜²åˆ·ç¥¨æœºåˆ¶
åŸºäºŽ **IP Hash** çš„ç®€å•é£ŽæŽ§ï¼š
- é™åˆ¶åŒä¸€ IP 24 å°æ—¶å†…é‡å¤æ‰“åˆ†  
- ä¿è¯è¯„åˆ†æ›´å®¢è§‚  

### ðŸ’¬ è¯„è®ºç¤¾åŒº
ç”¨æˆ·å¯ä»¥è¯„è®ºä»¥ä¸‹ç»´åº¦ï¼š
- éš”éŸ³
- ç”µæ¢¯é€Ÿåº¦
- ç‰©ä¸šè´¨é‡
- å®‰å…¨æ€§
- å‘¨è¾¹é…å¥—  
ç­‰ç­‰â€¦â€¦

### ðŸ–¼ï¸ å¤šæ¥æºå›¾åƒç³»ç»Ÿ
æ”¯æŒå¤šå›¾æºæ··ç”¨ï¼š
- Supabase storageï¼ˆäº‘ç«¯ä¸Šä¼ ï¼‰  
- æœ¬åœ° public/ é™æ€å›¾  
- Unsplashï¼ˆç½‘ç»œå›¾ï¼‰  

---

## ðŸ›  æŠ€æœ¯æ ˆ

| åˆ†ç±» | æŠ€æœ¯ |
|------|------|
| å‰ç«¯æ¡†æž¶ | **Next.js 15 (App Router)** |
| è¯­è¨€ | **TypeScript** |
| CSS | Tailwind CSS |
| åŽç«¯ | Supabase (PostgreSQL) |
| å›¾æ ‡åº“ | Lucide React |
| éƒ¨ç½² | Vercel |

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/melbscore.git
cd melbscore
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. é…ç½®çŽ¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º **.env.local**ï¼š

```env
NEXT_PUBLIC_SUPABASE_URL=ä½ çš„_Supabase_Project_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=ä½ çš„_Supabase_Anon_Key
```

### 4. å¯åŠ¨å¼€å‘çŽ¯å¢ƒ

```bash
npm run dev
```

è®¿é—®ï¼šhttp://localhost:3000

---

## ðŸ—„ï¸ æ•°æ®åº“é…ç½®ï¼ˆSupabaseï¼‰

æœ¬é¡¹ç›®ä¾èµ– Supabase çš„ PostgreSQLã€‚  
è¯·åœ¨ Supabase çš„ **SQL Editor** ä¸­è¿è¡Œä»¥ä¸‹å†…å®¹ã€‚

---

### 1. å»ºè¡¨ SQL

```sql
CREATE TABLE apartments (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    name TEXT NOT NULL,
    location TEXT,
    cover_image TEXT,
    rating_avg NUMERIC(3, 1) DEFAULT 0.0,
    rating_count INTEGER DEFAULT 0,
    tags TEXT[],
    created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE reviews (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    apartment_id UUID REFERENCES apartments(id) ON DELETE CASCADE,
    content TEXT,
    score INTEGER CHECK (score >= 1 AND score <= 10),
    upvotes INTEGER DEFAULT 0,
    ip_hash TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

### 2. è‡ªåŠ¨è¯„åˆ†è§¦å‘å™¨ï¼ˆTriggerï¼‰

```sql
CREATE OR REPLACE FUNCTION update_apartment_stats()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE apartments
    SET 
        rating_avg = (
            SELECT COALESCE(ROUND(AVG(score), 1), 0)
            FROM reviews
            WHERE apartment_id = NEW.apartment_id
        ),
        rating_count = (
            SELECT COUNT(*)
            FROM reviews
            WHERE apartment_id = NEW.apartment_id
        )
    WHERE id = NEW.apartment_id;

    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER on_review_added
AFTER INSERT ON reviews
FOR EACH ROW
EXECUTE FUNCTION update_apartment_stats();
```

---

## ðŸ“‚ é¡¹ç›®ç»“æž„

```
melbscore/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx
â”‚   â”œâ”€â”€ actions.ts
â”‚   â””â”€â”€ apartment/[id]/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ApartmentCard.tsx
â”‚   â””â”€â”€ ReviewForm.tsx
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ supabase.ts
â”œâ”€â”€ public/
â””â”€â”€ next.config.ts
```

---

## ðŸš¢ éƒ¨ç½² (Deployment)

ä½¿ç”¨ Vercelï¼š

1. æŽ¨é€ä»£ç åˆ° GitHub  
2. åœ¨ Vercel å¯¼å…¥æ­¤ä»“åº“  
3. å¡«å†™çŽ¯å¢ƒå˜é‡  
4. ç‚¹å‡» Deploy  

---

## ðŸ“ Roadmap

- [x] åŸºç¡€è¯„åˆ†ä¸Žè¯„è®ºç³»ç»Ÿ  
- [x] å›¾ç‰‡å±•ç¤ºï¼ˆæœ¬åœ° + ç½‘ç»œå›¾ï¼‰  
- [ ] æœç´¢åŠŸèƒ½  
- [ ] åœ°å›¾æ¨¡å¼  
- [ ] ç”¨æˆ·ç™»å½•  
- [ ] è¯„è®ºå›¾ç‰‡ä¸Šä¼   
- [ ] å¤šç»´è¯„åˆ†ï¼ˆéš”éŸ³ã€å®‰å…¨ç­‰ï¼‰  

---

## ðŸ¤ è´¡çŒ®

æ¬¢è¿Žæäº¤ Issue æˆ– PRï¼Œæ¬¢è¿Ž Star é¡¹ç›®æ”¯æŒï¼

---

## ðŸ“„ License

MIT License
